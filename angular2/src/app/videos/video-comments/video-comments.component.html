<div class="panel panel-default">
  <div class="panel-heading"><h3 class="panel-title" style="font-size: 14px">Comments</h3></div>
  <div class="panel-body">

    <form [formGroup]="form" (ngSubmit)="onSubmit()" novalidate *ngIf="user.id">
      <fieldset [disabled]="isSubmitting">
        <div class="form-group">
          <textarea class="form-control" formControlName="body" id="body" rows="4"></textarea>
        </div>
        <input type="submit" value="Comment" class="btn btn-success" [disabled]="!form.valid"/>
      </fieldset>
    </form>

    <div class="clearfix"></div>
    <hr/>

    <div class="loader" *ngIf="loading || !video.comments">
      <img src="assets/images/ajax-gray.gif"/>
    </div>

    <div id="comments-list" *ngIf="video.comments">

      <div *ngFor="let comment of video.comments.items" class="">
        <div class="panel panel-default comment-data comment-panel-{{comment.id}}">
          <div class="panel-heading">
            <h3 class="panel-title" style="font-size: 14px">
              Comentario de <strong>{{comment.user.fullName}}</strong> el {{comment.createdAt | date:'dd/MM/y' }}
            </h3>
          </div>
          <div class="panel-body line-breaker">{{comment.body}}</div>
          <div class="pull-right" *ngIf="user.id == comment.user.id || user.id == comment.video.user.id">
            <span class="glyphicon glyphicon-trash pointer" aria-hidden="true"
                  (click)="deleteComment(comment.id)"></span>
          </div>
          <div class="clearfix"></div>
        </div>
      </div>

      <div *ngIf="loadingNext">
        <button class="btn btn-default btn-block">Loading...</button>
      </div>
      <button class="btn btn-default btn-block" (click)="next()"
              *ngIf="!loadingNext && (video.comments && video.comments._links.next)">Load More
      </button>

      <div *ngIf="!video.comments.items.length > 0"><p class="text-muted text-center">No comments</p></div>
    </div>

  </div>
</div>
